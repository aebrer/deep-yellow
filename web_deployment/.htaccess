# Apache configuration for Godot HTML5 export with threading support
#
# Copy this file to your web deployment directory (e.g., build/web/.htaccess)
# or add these headers to your Apache virtual host configuration.
#
# These headers enable SharedArrayBuffer, which is required for Godot's
# threading support. Without them, ChunkGenerationThread will fail and
# chunks will never generate.

<IfModule mod_headers.c>
    # Required for SharedArrayBuffer (Godot threading)
    Header set Cross-Origin-Opener-Policy "same-origin"
    Header set Cross-Origin-Embedder-Policy "require-corp"

    # Optional: Cache control for assets
    <FilesMatch "\.(wasm|pck)$">
        Header set Cache-Control "public, max-age=31536000, immutable"
    </FilesMatch>

    <FilesMatch "\.(html|js)$">
        Header set Cache-Control "public, max-age=3600, must-revalidate"
    </FilesMatch>
</IfModule>

# Optional: MIME types for Godot files
<IfModule mod_mime.c>
    AddType application/wasm .wasm
    AddType application/octet-stream .pck
</IfModule>

# Optional: Compression for better performance
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/javascript
    AddOutputFilterByType DEFLATE application/wasm
</IfModule>
